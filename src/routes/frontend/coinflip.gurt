<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coinflip - 67 Casino</title>
    <meta name="theme-color" content="#7c3aed">
    <meta name="description" content="Coinflip game at 67 Casino">
    <font name="inter" src="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2" />
    <style>
        body { font-inter }
    </style>
    <script>
        -- Coinflip Game Logic
        local headsCount = 0
        local tailsCount = 0
        local totalFlips = 0
        local isFlipping = false

        -- Get DOM elements
        local coin = gurt.select('#coin')
        local result = gurt.select('#result')
        local flipButton = gurt.select('#flipButton')
        local headsDisplay = gurt.select('#headsCount')
        local tailsDisplay = gurt.select('#tailsCount')
        local totalDisplay = gurt.select('#totalFlips')

        -- Coin styles
        local headsStyle = "w-[200px] h-[200px] rounded-full cursor-pointer bg-gradient-to-br from-[#ffd700] to-[#ffed4e] flex items-center justify-center text-6xl font-bold text-[#8b4513] border-4 border-[#daa520]"
        local tailsStyle = "w-[200px] h-[200px] rounded-full cursor-pointer bg-gradient-to-br from-[#c0c0c0] to-[#e5e7eb] flex items-center justify-center text-6xl font-bold text-[#374151] border-4 border-[#9ca3af]"

        -- Function to update display
        local function updateDisplay()
            headsDisplay.text = tostring(headsCount)
            tailsDisplay.text = tostring(tailsCount)
            totalDisplay.text = tostring(totalFlips)
        end

        -- Function to flip the coin
        local function flipCoin()
            if isFlipping then
                return
            end
            
            isFlipping = true
            flipButton.text = "Flipping..."
            result.text = ""
            
            -- Animate coin spinning by changing text rapidly
            local spinCount = 0
            local spinInterval = setInterval(function()
                spinCount = spinCount + 1
                if spinCount % 2 == 0 then
                    coin.text = "H"
                    coin.style = headsStyle
                else
                    coin.text = "T"
                    coin.style = tailsStyle
                end
            end, 100)
            
            -- Generate random result (0 = heads, 1 = tails)
            local flipResult = math.random(0, 1)
            
            -- Stop spinning and show final result after 1 second
            setTimeout(function()
                clearInterval(spinInterval)
                
                -- Set final result
                if flipResult == 0 then
                    -- Heads
                    coin.text = "H"
                    coin.style = headsStyle
                    result.text = "HEADS!"
                    result.style = "text-2xl font-bold text-[#ffd700] mb-6"
                    headsCount = headsCount + 1
                else
                    -- Tails  
                    coin.text = "T"
                    coin.style = tailsStyle
                    result.text = "TAILS!"
                    result.style = "text-2xl font-bold text-[#c0c0c0] mb-6"
                    tailsCount = tailsCount + 1
                end
                
                totalFlips = totalFlips + 1
                updateDisplay()
                
                flipButton.text = "Flip Coin"
                isFlipping = false
                
                trace.log("Coin flip result: " .. (flipResult == 0 and "Heads" or "Tails"))
            end, 1000)
        end

        -- Add click event listeners
        flipButton:on('click', flipCoin)
        coin:on('click', flipCoin)

        -- Initialize math random seed
        math.randomseed(Time.now())

        -- Initialize display
        updateDisplay()

        trace.log("Coinflip game initialized!")
    </script>
</head>
<body style="bg-[#0a0a0a] text-white m-0 p-0 font-inter min-h-screen">
    <!-- Postprocess Effects for Casino Atmosphere -->
    <postprocess preset="film" grain_amount="0.025" />
    <postprocess preset="vignette" vignette_strength="0.7" vignette_color="#001122" />
    <!-- Top Navigation Bar -->
    <div style="bg-[#111111] p-4 border-b border-[#333333]">
        <div style="flex justify-between items-center max-w-6xl mx-auto">
            <!-- Casino Brand -->
            <div style="flex items-center">
                <a href="/" style="text-xl font-bold mr-8 text-white cursor-pointer">67 Casino</a>
            </div>
            
            <!-- Menu Navigation -->
            <div style="flex items-center">
                <a href="/" style="text-[#888888] cursor-pointer mx-4 hover:text-white">Home</a>
                <span style="text-white cursor-pointer mx-4 hover:text-[#7c3aed]">Gambling</span>
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white">Gurt</span>
            </div>
            
            <!-- Gurt Wallet (Far Right) -->
            <div style="flex items-center ml-8">
                <div style="bg-[#1a1a1a] rounded-xl px-4 py-2 border border-[#333333] flex items-center">
                    <a href="/login" style="text-white px-2 py-1 rounded text-sm font-bold cursor-pointer border border-[#6d28d9]">
                        Login
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Area -->
    <div style="flex flex-col items-center justify-center min-h-[80vh] p-8">
        <div style="max-w-2xl mx-auto text-center">
            <!-- Game Title -->
            <h1 style="text-4xl font-bold text-white mb-4">Coinflip</h1>
            <p style="text-lg text-[#888888] mb-8">Click the coin to flip it!</p>
            
            <!-- Coin Container -->
            <div style="flex justify-center mb-8">
                <div id="coin" style="w-[200px] h-[200px] rounded-full cursor-pointer bg-gradient-to-br from-[#ffd700] to-[#ffed4e] flex items-center justify-center text-6xl font-bold text-[#8b4513] border-4 border-[#daa520]">
                    H
                </div>
            </div>
            
            <!-- Result Display -->
            <div id="result" style="text-2xl font-bold text-white mb-6 min-h-8"></div>
            
            <!-- Flip Button -->
            <button id="flipButton" style="bg-[#7c3aed] text-white px-8 py-3 rounded-lg text-lg font-bold cursor-pointer hover:bg-[#8b5cf6] border-none">
                Flip Coin
            </button>
            
            <!-- Stats -->
            <div style="mt-8 flex justify-center gap-8">
                <div style="text-center">
                    <div style="text-2xl font-bold text-white" id="headsCount">0</div>
                    <div style="text-[#888888]">Heads</div>
                </div>
                <div style="text-center">
                    <div style="text-2xl font-bold text-white" id="tailsCount">0</div>
                    <div style="text-[#888888]">Tails</div>
                </div>
                <div style="text-center">
                    <div style="text-2xl font-bold text-white" id="totalFlips">0</div>
                    <div style="text-[#888888]">Total Flips</div>
                </div>
            </div>
            
            <!-- Back to Games -->
            <div style="mt-8">
                <a href="/" style="text-[#7c3aed] hover:text-[#8b5cf6] cursor-pointer">‚Üê Back to Games</a>
            </div>
        </div>
    </div>
</body>
</html>
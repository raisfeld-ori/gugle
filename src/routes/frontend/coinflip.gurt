<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coinflip - 67 Casino</title>
    <meta name="theme-color" content="#7c3aed">
    <meta name="description" content="Coinflip game at 67 Casino">
    <font name="inter" src="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2" />
    <style>
        body { 
            font-inter 
            bg-[#0a0a0a] 
            text-white 
            m-0 
            p-0 
            min-h-screen
        }
    </style>
    <script>
        -- Coinflip Game Logic
        local headsCount = 0
        local tailsCount = 0
        local totalFlips = 0
        local isFlipping = false

        -- Get DOM elements
        local coin = gurt.select('#coin')
        local result = gurt.select('#result')
        local flipButton = gurt.select('#flipButton')
        local headsDisplay = gurt.select('#headsCount')
        local tailsDisplay = gurt.select('#tailsCount')
        local totalDisplay = gurt.select('#totalFlips')

        -- Function to update display
        local function updateDisplay()
            headsDisplay.text = tostring(headsCount)
            tailsDisplay.text = tostring(tailsCount)
            totalDisplay.text = tostring(totalFlips)
        end

        -- Function to flip the coin
        local function flipCoin()
            if isFlipping then
                return
            end
            
            isFlipping = true
            flipButton.text = "Flipping..."
            result.text = ""
            
            -- Animate coin spinning by changing text rapidly
            local spinCount = 0
            local spinInterval = setInterval(function()
                spinCount = spinCount + 1
                if spinCount % 2 == 0 then
                    coin.text = "HEADS"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#FFD700] border-4 border-[#FFA500] text-2xl font-bold text-[#8B4513] cursor-pointer mx-auto pt-[130px] text-center"
                else
                    coin.text = "TAILS"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#C0C0C0] border-4 border-[#A9A9A9] text-2xl font-bold text-[#2F4F4F] cursor-pointer mx-auto pt-[130px] text-center"
                end
            end, 100)
            
            -- Generate random result (0 = heads, 1 = tails)
            local flipResult = math.random(0, 1)
            
            -- Stop spinning and show final result after 1 second
            setTimeout(function()
                clearInterval(spinInterval)
                
                -- Set final result
                if flipResult == 0 then
                    -- Heads
                    coin.text = "HEADS"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#FFD700] border-4 border-[#FFA500] text-2xl font-bold text-[#8B4513] cursor-pointer mx-auto pt-[130px] text-center"
                    result.text = "üéâ HEADS WINS!"
                    result.style = "text-3xl font-bold text-[#FFD700] mb-8 mx-auto text-center"
                    headsCount = headsCount + 1
                else
                    -- Tails  
                    coin.text = "TAILS"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#C0C0C0] border-4 border-[#A9A9A9] text-2xl font-bold text-[#2F4F4F] cursor-pointer mx-auto pt-[130px] text-center"
                    result.text = "üéâ TAILS WINS!"
                    result.style = "text-3xl font-bold text-[#C0C0C0] mb-8 mx-auto text-center"
                    tailsCount = tailsCount + 1
                end
                
                totalFlips = totalFlips + 1
                updateDisplay()
                
                flipButton.text = "Flip Again"
                isFlipping = false
                
                trace.log("Coin flip result: " .. (flipResult == 0 and "Heads" or "Tails"))
            end, 1000)
        end

        -- Add click event listeners
        flipButton:on('click', flipCoin)
        coin:on('click', flipCoin)

        -- Initialize math random seed
        math.randomseed(Time.now())

        -- Initialize display
        updateDisplay()

        trace.log("Coinflip game initialized!")
    </script>
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav style="bg-[#1a1a1a] p-3 flex justify-between items-center rounded-lg mx-4 mt-4 border border-[#333333]">
        <!-- Casino Logo -->
        <div style="flex items-center gap-3">
            <div style="w-8 h-8 bg-[#7c3aed] rounded-lg flex items-center justify-center">
                <span style="text-white text-lg font-bold">67</span>
            </div>
            <span style="text-white text-xl font-bold">67 Casino</span>
        </div>
        
        <!-- Menu Navigation -->
        <div style="flex items-center">
            <a href="/" style="text-[#888888] cursor-pointer mx-4 hover:text-white text-decoration-none">Home</a>
            <a href="/coinflip" style="text-white cursor-pointer mx-4 hover:text-[#7c3aed] text-decoration-none">CoinFlip</a>
        </div>
        
        <!-- GURT Wallet Balance -->
        <div style="flex items-center gap-3 bg-[#2a2a2a] px-4 py-2 rounded-lg border border-[#444444]">
            <span style="color-[#ffd700] text-lg font-bold">G</span>
            <span style="color-white text-lg font-semibold">1000</span>
            <button style="bg-[#7c3aed] text-white px-3 py-1 rounded-md text-sm hover:bg-[#6d28d9] cursor-pointer border-none">+</button>
        </div>
    </nav>

    <!-- Centered Game Container -->
    <div style="min-h-[calc(100vh-80px)] p-8">
        <div style="w-full max-w-4xl mx-auto text-center pt-16">
            <!-- Game Title -->
            <h1 style="text-6xl font-bold text-white mb-4 mx-auto">Coinflip</h1>
            <p style="text-xl text-[#888888] mb-16 mx-auto">Click the coin or button to flip!</p>
            
            <!-- Coin Container -->
            <div style="mb-16">
                <div id="coin" style="w-[300px] h-[300px] rounded-full bg-[#FFD700] border-4 border-[#FFA500] text-2xl font-bold text-[#8B4513] cursor-pointer mx-auto pt-[130px] text-center">
                    GURT
                </div>
            </div>
            
            <!-- Result Display -->
            <div id="result" style="text-3xl font-bold text-white mb-12 min-h-[3rem] mx-auto text-center"></div>
            
            <!-- Flip Button -->
            <button id="flipButton" style="bg-[#7c3aed] text-white px-12 py-6 rounded-xl text-2xl font-bold cursor-pointer hover:bg-[#8b5cf6] border-none mb-16 mx-auto block">
                Flip Coin
            </button>
            
            <!-- Stats Grid -->
            <div style="max-w-3xl mx-auto mb-12 text-center overflow-hidden">
                <div style="bg-[#1a1a1a] border border-[#333333] rounded-xl p-6 text-center m-2 w-[170px] float-left">
                    <div style="text-3xl font-bold text-[#FFD700] mb-2" id="headsCount">0</div>
                    <div style="text-[#888888] text-lg">Heads</div>
                </div>
                <div style="bg-[#1a1a1a] border border-[#333333] rounded-xl p-6 text-center m-2 w-[170px] float-left">
                    <div style="text-3xl font-bold text-[#C0C0C0] mb-2" id="tailsCount">0</div>
                    <div style="text-[#888888] text-lg">Tails</div>
                </div>
                <div style="bg-[#1a1a1a] border border-[#333333] rounded-xl p-6 text-center m-2 w-[170px] float-left">
                    <div style="text-3xl font-bold text-white mb-2" id="totalFlips">0</div>
                    <div style="text-[#888888] text-lg">Total Flips</div>
                </div>
            </div>
            
            <!-- Back to Games -->
            <div style="text-center mx-auto">
                <a href="/" style="text-[#7c3aed] hover:text-[#8b5cf6] cursor-pointer text-xl">‚Üê Back to Games</a>
            </div>
        </div>
    </div>
</body>
</html>
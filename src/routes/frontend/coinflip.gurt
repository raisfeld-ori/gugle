<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coinflip - 67 Casino</title>
    <meta name="theme-color" content="#7c3aed">
    <meta name="description" content="Coinflip game at 67 Casino">
    <font name="inter" src="https://fonts.gstatic.com/s/inter/v13/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfAZ9hiJ-Ek-_EeA.woff2" />
    <style>
        body { 
            font-inter 
            bg-[#0a0a0a] 
            text-white 
            m-0 
            p-0 
            min-h-screen
        }
    </style>
            <script>
    local balance = gurt.crumbs.get("balance")
    if balance == nil then
        gurt.crumbs.set({
            name = "balance",
            value = 100
        })
        balance = 100
    end
    local element = gurt.select('#wallet-balance')
    element.text = balance
    </script>
    <script>
        -- Coinflip Game Logic
        local winsCount = 0
        local SevenCount = 0
        local totalFlips = 0
        local isFlipping = false

        -- Get DOM elements
        local coin = gurt.select('#coin')
        local result = gurt.select('#result')
        local flipButton = gurt.select('#flipButton')
        local winsDisplay = gurt.select('#winsCount')
        local SevenDisplay = gurt.select('#SevenCount')
        local totalDisplay = gurt.select('#totalFlips')

        -- Function to update display
        local function updateDisplay()
            winsDisplay.text = tostring(winsCount)
            SevenDisplay.text = tostring(SevenCount)
            totalDisplay.text = tostring(totalFlips)
        end

        -- Function to flip the coin
        local function flipCoin()
            if isFlipping then
                return
            end
            
            isFlipping = true
            flipButton.text = "Flipping..."
            result.text = ""
            
            -- Animate coin spinning by changing text rapidly
            local spinCount = 0
            local spinInterval = setInterval(function()
                spinCount = spinCount + 1
                if spinCount % 2 == 0 then
                    coin.text = "Six"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#FFD700] border-4 border-[#FFA500] text-2xl font-bold text-[#8B4513] cursor-pointer mx-auto pt-[130px] text-center"
                else
                    coin.text = "Seven"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#C0C0C0] border-4 border-[#A9A9A9] text-2xl font-bold text-[#2F4F4F] cursor-pointer mx-auto pt-[130px] text-center"
                end
            end, 100)
            
            -- Generate random result (0 = Six, 1 = Seven)
            local flipResult = math.random(0, 1)
            
            -- Stop spinning and show final result after 1 second
            setTimeout(function()
                clearInterval(spinInterval)
                
                -- Set final result
                if flipResult == 0 then
                    local balance = gurt.crumbs.get("balance")
                    balance = balance + 50
                    gurt.crumbs.set({
                        name = "balance",
                        value = balance
                    })
                    local element = gurt.select('#wallet-balance')
                    element.text = balance
                    -- Six
                    coin.text = "Six"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#FFD700] border-4 border-[#FFA500] text-2xl font-bold text-[#8B4513] cursor-pointer mx-auto pt-[130px] text-center"
                    result.text = "🎉 Six Six!"
                    result.style = "text-3xl font-bold text-[#FFD700] mb-8 mx-auto text-center"
                    winsCount = winsCount + 1
                else
                    -- Seven 
                    local balance = gurt.crumbs.get("balance")
                    balance = balance - 50
                    gurt.crumbs.set({
                        name = "balance",
                        value = balance
                    })
                    local element = gurt.select('#wallet-balance')
                    element.text = balance
                    coin.text = "Seven"
                    coin.style = "w-[300px] h-[300px] rounded-full bg-[#C0C0C0] border-4 border-[#A9A9A9] text-2xl font-bold text-[#2F4F4F] cursor-pointer mx-auto pt-[130px] text-center"
                    result.text = "🎉 Six Seven!"
                    result.style = "text-3xl font-bold text-[#C0C0C0] mb-8 mx-auto text-center"
                    SevenCount = SevenCount + 1
                end
                
                totalFlips = totalFlips + 1
                updateDisplay()
                
                flipButton.text = "Flip Again"
                isFlipping = false
                
                trace.log("Coin flip result: " .. (flipResult == 0 and "Six" or "Seven"))
            end, 1000)
        end

        -- Add click event listeners
        flipButton:on('click', flipCoin)
        coin:on('click', flipCoin)

        -- Initialize math random seed
        math.randomseed(Time.now())

        -- Initialize display
        updateDisplay()

        trace.log("Coinflip game initialized!")
    </script>
        <script>
    -- Navigation event handlers
    local navHome = gurt.select('#nav-home')
    local navSlots = gurt.select('#nav-slots')
    local navBlackjack = gurt.select('#nav-blackjack')
    local navRoulette = gurt.select('#nav-roulette')
    local navPoker = gurt.select('#nav-poker')
    local navDice = gurt.select('#nav-dice')
    local navCoinflip = gurt.select('#nav-coinflip')
    
    navHome:on('click', function() gurt.location.goto('/') end)
    navSlots:on('click', function() gurt.location.goto('/slots') end)
    navBlackjack:on('click', function() gurt.location.goto('/blackjack') end)
    navRoulette:on('click', function() gurt.location.goto('/roulette') end)
    navPoker:on('click', function() gurt.location.goto('/poker') end)
    navDice:on('click', function() gurt.location.goto('/dice') end)
    navCoinflip:on('click', function() gurt.location.goto('/coinflip') end)
    </script>
</head>
<body>
     <!-- Top Navigation Bar -->
    <div style="bg-[#111111] p-4 border-b border-[#333333]">
        <div style="flex justify-between items-center max-w-6xl mx-auto">
            <!-- Casino Brand -->
            <div style="flex items-center">
                <span style="text-xl font-bold mr-8 text-white">67 Casino</span>
            </div>
            
            <!-- Menu Navigation -->
            <div style="flex items-center">
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white no-underline" id="nav-home">Home</span>
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white no-underline" id="nav-slots">Slots</span>
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white no-underline" id="nav-blackjack">Blackjack</span>
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white no-underline" id="nav-roulette">Roulette</span>
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white no-underline" id="nav-poker">Poker</span>
                <span style="text-[#888888] cursor-pointer mx-4 hover:text-white no-underline" id="nav-dice">Dice</span>
                <span style="text-white cursor-pointer mx-4 hover:text-[#7c3aed] no-underline" id="nav-coinflip">CoinFlip</span>
            </div>
            
            <!-- Gurt Wallet Balance (Far Right) -->
            <div style="flex items-center ml-8">
                <div style="bg-[#2a2a2a] rounded-lg px-4 py-2 border border-[#444444] flex items-center gap-3">
                    <!-- Coin Icon -->
                    <div style="w-6 h-6 rounded-full bg-[#ffd700] border-2 border-[#ffed4e] text-[#8b4513] text-xs font-bold text-center">
                        G
                    </div>
                    <!-- Balance -->
                    <span style="text-white font-bold" id="wallet-balance">test</span>
                    <!-- Add Button -->
                    <button style="w-6 h-6 bg-[#555555] text-white text-sm font-bold cursor-pointer hover:bg-[#666666] border-none">
                        +
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Centered Game Container -->
    <div style="min-h-[calc(100vh-80px)] p-8">
        <div style="w-full max-w-4xl mx-auto text-center pt-16">
            <!-- Game Title -->
            <h1 style="text-6xl font-bold text-white mb-4 mx-auto">Coinflip</h1>
            <p style="text-xl text-[#888888] mb-16 mx-auto">Click the coin or button to flip! Each flip gives you 50 chips or losses 50 chips</p>
            
            <!-- Coin Container -->
            <div style="mb-16">
                <div id="coin" style="w-[300px] h-[300px] rounded-full bg-[#FFD700] border-4 border-[#FFA500] text-2xl font-bold text-[#8B4513] cursor-pointer mx-auto pt-[130px] text-center">
                    GURT
                </div>
            </div>
            
            <!-- Result Display -->
            <div id="result" style="text-3xl font-bold text-white mb-12 min-h-[3rem] mx-auto text-center"></div>
            
            <!-- Flip Button -->
            <button id="flipButton" style="bg-[#7c3aed] text-white px-12 py-6 rounded-xl text-2xl font-bold cursor-pointer hover:bg-[#8b5cf6] border-none mb-16 mx-auto block">
                Flip Coin
            </button>
            
            <!-- Stats Grid -->
            <div style="max-w-3xl mx-auto mb-12 text-center overflow-hidden">
                <div style="bg-[#1a1a1a] border border-[#333333] rounded-xl p-6 text-center m-2 w-[170px] float-left">
                    <div style="text-3xl font-bold text-[#FFD700] mb-2" id="winsCount">0</div>
                    <div style="text-[#888888] text-lg">Six</div>
                </div>
                <div style="bg-[#1a1a1a] border border-[#333333] rounded-xl p-6 text-center m-2 w-[170px] float-left">
                    <div style="text-3xl font-bold text-[#C0C0C0] mb-2" id="SevenCount">0</div>
                    <div style="text-[#888888] text-lg">Seven</div>
                </div>
                <div style="bg-[#1a1a1a] border border-[#333333] rounded-xl p-6 text-center m-2 w-[170px] float-left">
                    <div style="text-3xl font-bold text-white mb-2" id="totalFlips">0</div>
                    <div style="text-[#888888] text-lg">Total Flips</div>
                </div>
            </div>
            
            <!-- Back to Games -->
            <div style="text-center mx-auto">
                <a href="/" style="text-[#7c3aed] hover:text-[#8b5cf6] cursor-pointer text-xl">← Back to Games</a>
            </div>
        </div>
    </div>
</body>
</html>